<mujoco model="flexible_rod_dual_drone">
  <compiler angle="degree" coordinate="local"/>
  <option timestep="0.002" gravity="0 0 -9.81"/>

  <default>
    <joint damping="0.05"/>
    <geom density="1000" friction="0.5 0.1 0.1" rgba=".8 .8 .2 1"/>
  </default>

  <asset>
    <texture type="skybox" builtin="gradient"
             rgb1="1 1 1" rgb2=".6 .8 1"
             width="256" height="256"/>
  </asset>

  <worldbody>
    <!-- Luz y piso -->
    <light pos="0 0 2" dir="0 0 -1"/>
    <geom type="plane" size="5 5 0.1" rgba=".3 .3 .3 1"/>

    <!-- ============ Varilla flexible con drones fijos a los extremos ============ -->
    <body name="rod_link_1" pos="-0.5 0 0.6">
      <!-- Drone 1 fijo al extremo izquierdo -->
      <body name="drone1" pos="0 0 0">
        <geom name="drone1_body" type="box" size="0.07 0.07 0.02" rgba="0 0.6 1 1"/>
      </body>

      <!-- Primer segmento -->
      <geom type="capsule" size="0.02" fromto="0 0 0  0.25 0 0" rgba="0.9 0.9 0.2 1"/>
      <joint type="ball" damping="0.05"/>

      <!-- Segundo segmento -->
      <body name="rod_link_2" pos="0.25 0 0">
        <geom type="capsule" size="0.02" fromto="0 0 0  0.25 0 0" rgba="0.9 0.9 0.2 1"/>
        <joint type="ball" damping="0.05"/>

        <!-- Tercer segmento -->
        <body name="rod_link_3" pos="0.25 0 0">
          <geom type="capsule" size="0.02" fromto="0 0 0  0.25 0 0" rgba="0.9 0.9 0.2 1"/>
          <joint type="ball" damping="0.05"/>

          <!-- Drone 2 fijo al extremo derecho -->
          <body name="drone2" pos="0.25 0 0">
            <geom name="drone2_body" type="box" size="0.07 0.07 0.02" rgba="1 0.4 0 1"/>
          </body>
        </body>
      </body>
    </body>
  </worldbody>
</mujoco>


